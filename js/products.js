var _resultsPerPage=3,numberOfPages=0,tableToQuery="";lastQueried="",justSearched=!1,justLookedByCategory=!1,lastQueriedSearch="",$(document).ready(function(){function a(e,s){s=s||"price",$.ajax({url:"load-products.php",method:"POST",data:{table:e,order:s},dataType:"html"}).done(function(e){"price"==s&&$("#order-by").val($("#order-by option:first").val()),$("#search-results").empty(),$(".pagination").empty(),$("#search-results").append(e);var a=$("#search-results").children().length;numberOfPages=Math.ceil(a/_resultsPerPage),$("#search-results .product:gt("+(_resultsPerPage-1)+")").hide(),$(".pagination").append('<li class="previous-item"><a class="page-link" href="#">Previous</a></li>');for(var t=1;t<numberOfPages+1;t++)$(".pagination").append('<li class="page-item"><a class="page-link" href="#">'+t+"</a></li>"),1==t&&$(".page-item").addClass("active");$(".pagination").append('<li class="next-item"><a class="page-link" href="#">Next</a></li>')})}function t(e){$(".page-item").removeClass("active"),$(".pagination li:nth-child("+(e+1)+")").addClass("active");var a=e*_resultsPerPage-_resultsPerPage,t=e*_resultsPerPage-1;$("#search-results .product:lt("+(t+1)+")").show(),$("#search-results .product:gt("+t+")").hide(),$("#search-results .product:lt("+a+")").hide()}function s(e,s){s=s||"price",$.ajax({url:"search-products.php",method:"POST",data:{search:e,order:s},dataType:"html"}).done(function(e){"price"==s&&$("#order-by").val($("#order-by option:first").val()),$("#search-results").empty(),$(".pagination").empty(),$("#search-results").append(e);var a=$("#search-results").children().length;numberOfPages=Math.ceil(a/_resultsPerPage),$("#search-results .product:gt("+(_resultsPerPage-1)+")").hide(),$(".pagination").append('<li class="previous-item"><a class="page-link" href="#">Previous</a></li>');for(var t=1;t<numberOfPages+1;t++)$(".pagination").append('<li class="page-item"><a class="page-link" href="#">'+t+"</a></li>"),1==t&&$(".page-item").addClass("active");$(".pagination").append('<li class="next-item"><a class="page-link" href="#">Next</a></li>')})}$(".category").on("click",function(){var e=$(this).attr("id").replace("cat-","");lastQueried=e,justLookedByCategory=!0,justSearched=!1,a(e)}),$("#order-by").on("change",function(){var e=$(this).val();justLookedByCategory?a(lastQueried,e):justSearched&&s(lastQueriedSearch,e)}),$(document).on("click",".page-item",function(){idx=$(this).index(),t(idx)}),$(document).on("click",".previous-item",function(){var e=$("li.active").index();1!=e&&t(e-1)}),$(document).on("click",".next-item",function(){var e=$("li.active").index();e!=numberOfPages&&t(e+1)}),$(document).on("click",".product",function(){var e="more-info-"+$(this)[0].id.split("-")[1];"hidden"==$("#"+e).css("visibility")?($("#"+e).css("visibility","visible"),$("#"+e).css("max-height","500px")):($("#"+e).css("visibility","hidden"),$("#"+e).css("max-height","0px"))}),$("#input-search").on("keypress",function(e){justLookedByCategory=!1,justSearched=!0,13==e.keyCode&&(lastQueriedSearch=$(this).val(),s($(this).val()))}),$("#search-icon").on("click",function(){justLookedByCategory=!1,justSearched=!0,lastQueriedSearch=$("#input-search").val(),s($("#input-search").val())})}),$(document).on("click",".btn-warning",function(){addItemId=$(this).attr("id").split("-")[2],sweetAlert({title:"Add to cart?",className:"swal-footer",icon:"info",buttons:{btn1:{text:"Cancel",className:["swal-cancel-btn","btn-danger"]},btn2:{text:"Add & continue",className:["swal-continue-btn","btn-success"]},btn3:{text:"Add & cart",className:["swal-cart-btn","btn-success"]}}})}),$(document).on("click",".swal-continue-btn",function(){$.ajax({url:"add-to-cart.php",method:"POST",data:{item:addItemId},dataType:"html"}).done(function(e){})}),$(document).on("click",".swal-cart-btn",function(){$.ajax({url:"add-to-cart.php",method:"POST",data:{item:addItemId},dataType:"html"}).done(function(e){window.location="my-cart.php"})});